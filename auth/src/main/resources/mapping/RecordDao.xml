<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mmp.im.auth.dao.RecordDao">

    <select id="listRecord" resultType="mmp.im.auth.model.Record">
        SELECT * FROM record
        <where>
            <if test="beginTime!=null">
                and BEGIN_TIME &gt;= #{beginTime}
            </if>
            <if test="endTime!=null">
                and END_TIME &lt;= #{endTime}
            </if>
            <if test="callNo!=null and callNo !=''">
                and CALL_NO LIKE '%' #{callNo} '%'
            </if>
            <if test="calledNo!=null and calledNo !=''">
                and CALLED_NO LIKE '%' #{calledNo} '%'
            </if>
            <if test="status!=null and status !=''">
                and STATUS = #{status}
            </if>
            <if test="connectType!=null and connectType !=''">
                and CONNECT_TYPE = #{connectType}
            </if>

        </where>
    </select>

    <select id="count" resultType="java.lang.Integer">
        SELECT COUNT(*) FROM record
        <where>
            <if test="beginTime!=null">
                and BEGIN_TIME &gt;= #{beginTime}
            </if>
            <if test="endTime!=null">
                and END_TIME &lt;= #{endTime}
            </if>
            <if test="callNo!=null and callNo !=''">
                and CALL_NO LIKE '%' #{callNo} '%'
            </if>
            <if test="calledNo!=null and calledNo !=''">
                and CALLED_NO LIKE '%' #{calledNo} '%'
            </if>
            <if test="status!=null and status !=''">
                and STATUS = #{status}
            </if>
            <if test="connectType!=null and connectType !=''">
                and CONNECT_TYPE = #{connectType}
            </if>

        </where>
    </select>


    <insert id="insertBatch">
        INSERT IGNORE INTO record
        (
            CALL_SHEET_ID, CALL_NO,
            CALLED_NO,END_TIME,CONNECT_TYPE,
            STATUS,DISPOSAL_AGENT,BEGIN_TIME,
            OFFERING_TIME,RECORD_FILE_NAME,
            CUSTOMER_NAME,REF_CALL_SHEET_ID,PBX
            ,QUEUE_NAME,FILE_SERVER,PROVINCE,
            DISTRICT,DISTRICT_CODE,KEY_TAG,
            CALL_TIME_LENGTH,PREMEDIA_KEY,PREMEDIA_MEMO
        )
        VALUES

        <foreach collection="list" item="record" separator=",">
            (
                #{record.CALL_SHEET_ID},
                #{record.CALL_NO},
                #{record.CALLED_NO},
                #{record.END_TIME},
                #{record.CONNECT_TYPE},
                #{record.STATUS},
                #{record.DISPOSAL_AGENT},
                #{record.BEGIN_TIME},
                #{record.OFFERING_TIME},
                #{record.RECORD_FILE_NAME},
                #{record.CUSTOMER_NAME},
                #{record.REF_CALL_SHEET_ID},
                #{record.PBX},
                #{record.QUEUE_NAME},
                #{record.FILE_SERVER},
                #{record.PROVINCE},
                #{record.DISTRICT},
                #{record.DISTRICT_CODE},
                #{record.KEY_TAG},
                #{record.CALL_TIME_LENGTH},
                #{record.PREMEDIA_KEY},
                #{record.PREMEDIA_MEMO}
            )
        </foreach>
    </insert>


</mapper>
